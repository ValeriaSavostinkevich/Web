<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>РДWП-Лабораторная 02</title>
  <link rel="stylesheet" type="text/css"
    href="file:///C:/Users/ASUS/Desktop/Study/4k-2s/Разработка динамических web-приложений/Лабораторные работы/Лабораторная_работа_03/03_css.css">

  <script
    src="file:///C:/Users/ASUS/Desktop/Study/4k-2s/Разработка динамических web-приложений/Лабораторные работы/ReactFramework/react.development.js"></script>
  <script
    src="file:///C:/Users/ASUS/Desktop/Study/4k-2s/Разработка динамических web-приложений/Лабораторные работы/ReactFramework/react-dom.development.js"></script>
  <script
    src="file:///C:/Users/ASUS/Desktop/Study/4k-2s/Разработка динамических web-приложений/Лабораторные работы/ReactFramework/babel.min.js"></script>
  <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
</head>

<body>
  <div id="root"></div>
  <script type="text/babel">
    const Data_Students = [
      { id: 1, name: 'Петров П.П.', spec: 'ИСиТ', group: 1, syear: 2016 },
      { id: 2, name: 'Иванов И.И.', spec: 'ИСиТ', group: 1, syear: 2016 },
      { id: 3, name: 'Сидоров С.С.', spec: 'ПОИТ', group: 4, syear: 2016 },
      { id: 4, name: 'Кириллов К.К.', spec: 'ПОИТ', group: 5, syear: 2016 },
      { id: 5, name: 'Алексеев А.А.', spec: 'ДЭВИ', group: 9, syear: 2016 },
      { id: 6, name: 'Сергеев С.С.', spec: 'ПОИБМС', group: 7, syear: 2017 },
      { id: 7, name: 'Михайлов М.М.', spec: 'ПОИБМС', group: 8, syear: 2017 },
      { id: 8, name: 'Александров А.А.', spec: 'ПОИБМС', group: 7, syear: 2017 },
      { id: 9, name: 'Кислый К.А.', spec: 'ДЭВИ', group: 10, syear: 2017 },
      { id: 10, name: 'Прокопеня А.А.', spec: 'ПОИБМС', group: 7, syear: 2017 },
      { id: 11, name: 'Ветров А.В.', spec: 'ПОИБМС', group: 8, syear: 2017 },
      { id: 12, name: 'Викторов В.В.', spec: 'ИСиТ', group: 3, syear: 2017 },
      { id: 13, name: 'Алексей А.А.', spec: 'ПОИБМС', group: 7, syear: 2015 },
      { id: 14, name: 'Григорьев  Г.Г.', spec: 'ДЭВИ', group: 9, syear: 2016 },
      { id: 15, name: 'Владимиров В.В.', spec: 'ПОИБМС', group: 8, syear: 2017 },
      { id: 16, name: 'Петров П.П.', spec: 'ДЭВИ', group: 9, syear: 2017 },
      { id: 17, name: 'Юрьев Ю.Ю.', spec: 'ИСиТ', group: 3, syear: 2017 },
      { id: 18, name: 'Евгеньев Е.В.', spec: 'ПОИБМС', group: 6, syear: 2018 },
      { id: 19, name: 'Валерьев В.В.', spec: 'ПОИБМС', group: 7, syear: 2017 },
      { id: 20, name: 'Антонов А.А.', spec: 'ПОИБМС', group: 7, syear: 2017 },
      { id: 21, name: 'Афанасьев А.А.', spec: 'ИСиТ', group: 2, syear: 2015 },
      { id: 22, name: 'Федоров Ф.Ф.', spec: 'ПОИБМС', group: 7, syear: 2016 },
      { id: 23, name: 'Николаев Н.Н.', spec: 'ИСиТ', group: 3, syear: 2017 }
    ];
    const Data_Events = [
      {
        id: 1, date: '2019-01-07', text: 'Собеседование',
        company: { id: 1, name: 'iTechArt' }, student: { id: 2, name: 'Иванов И.И.', spec: 'ИСиТ', group: 1, syear: 2016 }
      },
      {
        id: 2, date: '2018-09-12', text: 'Стажировка',
        company: { id: 1, name: 'iTechArt' }, student: { id: 1, name: 'Петров П.П.', spec: 'ИСиТ', group: 1, syear: 2016 }
      },
      {
        id: 3, date: '2018-02-07', text: 'Принят на работу',
        company: { id: 2, name: 'LeverX' }, student: { id: 2, name: 'LeverX' }
      },
      {
        id: 4, date: '2018-04-22', text: 'Собеседование не прошел, плохой англ',
        company: { id: 2, name: 'LeverX' }, student: { id: 4, name: 'Кириллов К.К.', spec: 'ПОИТ', group: 5, syear: 2016 }
      },
      {
        id: 5, date: '2018-07-12', text: 'Пошел на лаб',
        company: { id: 3, name: 'iSsoft' }, student: { id: 5, name: 'Алексеев А.А.', spec: 'ДЭВИ', group: 9, syear: 2016 }
      },
      {
        id: 6, date: '2018-06-14', text: 'Посещает курсы',
        company: { id: 4, name: 'EPAM' }, student: { id: 2, name: 'Иванов И.И.', spec: 'ИСиТ', group: 1, syear: 2016 }
      },
      {
        id: 7, date: '2018-04-15', text: 'Работает полный день',
        company: { id: 4, name: 'EPAM' }, student: { id: 6, name: 'Сергеев С.С.', spec: 'ПОИБМС', group: 7, syear: 2017 }
      },
      {
        id: 8, date: '2017-02-25', text: 'Хакатон 1 место',
        company: null, student: { id: 7, name: 'Александров А.А.', spec: 'ПОИБМС', group: 7, syear: 2017 }
      },
      {
        id: 9, date: '2017-11-30', text: 'Собеседование',
        company: { id: 5, name: 'IBA' }, student: { id: 7, name: 'Александров А.А.', spec: 'ПОИБМС', group: 7, syear: 2017 }
      },
      {
        id: 10, date: '2017-11-30', text: 'Собеседование',
        company: { id: 2, name: 'LeverX' }, student: { id: 7, name: 'Александров А.А.', spec: 'ПОИБМС', group: 7, syear: 2017 }
      }
    ];

    const Data_Speciality = [{ name: 'ИСиТ' }, { name: 'ПОИТ' }, { name: 'ПОИБМС' }, { name: 'ДЭВИ' }];

    const Data_Companies = [
      { id: 1, name: 'iTechArt' },
      { id: 2, name: 'LeverX' },
      { id: 3, name: 'iSsoft' },
      { id: 4, name: 'EPAM' },
      { id: 5, name: 'IBA' },
      { id: 6, name: 'Wargaming' }];

    const REGIM = {
      S: 'Students',
      C: 'Companies',
      E: 'Events'
    };

    const Sort_Temp = [];	

    class App extends React.Component {
      state = {
        regim: REGIM.S,
      };

      changeRegim = (r) => {
        this.state.regim != r ? this.setState({ regim: r }) : null;
      };

      render() {
        return (
          <div className="app">
            <h1>App: {this.state.regim}</h1>
            <Navigation changeRegim={this.changeRegim} />
            <Panel regim={this.state.regim} />
          </div>
        );
      }
    }

    const Navigation = (props) => {

      const clck = (e) => {
        props.changeRegim(REGIM[e.target.id]);
        [...document.querySelectorAll(".menu .activebutton")].map((e) => {
          e.className = 'passivebutton';
          e.style.background = '#FDC6DB';
        })

        document.getElementById(e.target.id).className = 'activebutton';
        document.getElementById(e.target.id).style.background = ' #F5176D';
      };

      return <nav className="menu">
        <button id='S' onClick={clck} className='activebutton'>{REGIM.S}</button>
        <button id='C' onClick={clck} className='passivebutton'>{REGIM.C}</button>
       
      </nav>
    }; //<button id='E' onClick={clck} className='passivebutton'>{REGIM.E}</button>

    class Panel extends React.Component {
      state = { currentstudent: null, currentcompany: null };

      updateCurrentStudent = (student) => {
        if (student) {
          this.setState({ currentstudent: student }, () => {
            [...document.querySelectorAll(".students .activebutton")].map((e) => {
              e.className = 'passivebutton';
              e.style.background = '#FDC6DB';
            })

            document.getElementById(this.state.currentstudent.id).className = 'activebutton';
            document.getElementById(this.state.currentstudent.id).style.background = ' #F5176D';
          })
        };

        return this.state.currentstudent;
      };

      updateCurrentCompany = (company) => {
        if (company) {
          this.setState({ currentcompany: company }, () => {
            [...document.querySelectorAll(".companies .activebutton")].map((e) => {
              e.className = 'passivebutton';
              e.style.background = '#FDC6DB';
            })

            document.getElementById(this.state.currentcompany.id).className = 'activebutton';
            document.getElementById(this.state.currentcompany.id).style.background = ' #F5176D';
          })
        };

        return this.state.currentcompany;
      };

      updateCurrentEvent = (event) => {
        if (event) {
          this.setState({ currentevent: event }, () => {
            [...document.querySelectorAll(".events .activebutton")].map((e) => {
              e.className = 'passivebutton';
              e.style.background = '#FDC6DB';
            })

            document.getElementById(this.state.currentevent.id).className = 'activebutton';
            document.getElementById(this.state.currentevent.id).style.background = ' #F5176D';
          })
        };

        return this.state.currentcompany;
      };

      render() {
        return (
          <div className="panel">
            { (this.props.regim == REGIM.S) && <Students data={Data_Students} currentstudent={this.updateCurrentStudent} specialites={Data_Speciality} sortdata={Sort_Temp} />}
            { (this.props.regim == REGIM.S) && <Student_Events data={Data_Events} currentstudent={this.state.currentstudent} />}

            { (this.props.regim == REGIM.C) && <Companies data={Data_Companies} currentcompany={this.updateCurrentCompany} sortdata={Sort_Temp} />}
            { (this.props.regim == REGIM.C) && <Company_Events data={Data_Events} currentcompany={this.state.currentcompany} />}

          </div>
        );
      }
            // { (this.props.regim == REGIM.E) && <Events data={Data_Events} currentevent={this.updateCurrentEvent} />}
            // { (this.props.regim == REGIM.E) && <Evs data={Data_Events} currentevent={this.state.currentevent} />}
    }

    class Students extends React.Component {

      constructor(props) {
        super(props);
        this.setstudent = this.setstudent.bind(this);
      }

      state = { students: this.props.data, currentstudent: null, sortStud : this.props.sortdata };
      flagx = () => { return this.state.flagadd || this.state.flagupdate || this.state.flagdelete; };

      setstudent = (e) => {
        if (!this.flagx()) {
          this.props.currentstudent(this.state.students.find(em => em.id == e.target.id));
          this.state.currentstudent = this.state.students.find(em => em.id == e.target.id);
        }
      };

      addobc = (e) => { this.setState({ flagadd: true }) };
      addcancel = (e) => { this.setState({ flagadd: false }) };
      add = (name, spec, year, group) => {
        this.setState({ flagadd: false });
        let newid = Date.now() % (10 * 365 * 24 * 60 * 60 * 1000);
        let newstudent = { id: newid, name: name, spec: spec, group: group, syear: year };
        this.state.students.unshift(newstudent);
        this.props.currentstudent(newstudent);
      };

      updateobc = (e) => { this.setState({ flagupdate: true }) };
      updatecancel = (e) => { this.setState({ flagupdate: false }) };
      update = (id, name, spec, syear, group) => {
        console.log('Student', id);
        let ntx = this.state.students.findIndex((em) => em.id == id);
        console.log('Student', ntx);
        if (ntx >= 0) {
          this.state.students[ntx] =
            { id: id, name: name, spec: spec, syear: syear, group: group };
          this.props.currentstudent(this.state.students[ntx] =
            { id: id, name: name, spec: spec, syear: syear, group: group });
        };
        this.setState({ flagupdate: false });
      };

      deleteobc = (e) => { this.setState({ flagdelete: true }) };
      deletecancel = (e) => { this.setState({ flagdelete: false }) };
      delete = (id) => {
        let ntx = this.state.students.findIndex((em) => em.id == id);
        this.state.students.splice(ntx, 1);
        this.setState({ flagdelete: false });
      };

      sortobc = (e)=>{this.setState({flagsort:true})};
	    sortcancel = (e)=>{this.setState({flagsort:false})};
	
	sortsort = (name, spec, year, group)=>{
				this.setState({flagsort:false});		
				this.state.sortStud.splice(0);
				this.state.students.map((item, index)=>{
						if(item.name==name&&(name!=null)){	
							this.state.sortStud.unshift(item);
						}
						
						if(item.spec==spec&&(spec!=null)){		
							this.state.sortStud.unshift(item);
						}
						
						if(item.year==year&&(year!=null)){							
							this.state.sortStud.unshift(item);
						}
						
						if(item.group==group&&(group!=null)){								
							this.state.sortStud.unshift(item);
						}

						if((name!=null)||(group!=null)||(year!=null)||(spec!=null)){
							this.setState({flagSortArray:true});								
						}
				});
			};

      render() {
        let createlist = null;
        let flag = this.state.currentstudent != null;

        let menu = <div className='optmenu'>
          {!this.flagx() && <button id='add' title='Add student'><img src='images/add.png' alt='add' onClick={this.addobc} /></button>}

          {!this.flagx() && flag && <button id='delete' title='Delete student'><img src='images/remove.png' alt='delete' onClick={this.deleteobc} /></button>}

          {!this.flagx() && flag && <button id='update' title='Update student'><img src='images/update.png' alt='update' onClick={this.updateobc} /></button>}

          {!this.flagx() && <button id="find" onClick={this.sortobc} alt='find'><img src="images/icons8_find.png"/></button>}
        </div>

        if (Array.isArray(this.state.students)) {
          if( this.state.flagSortArray){
            createlist = this.state.sortStud.map((item, index)=>
					<button key = {item.id} id = {item.id} onClick={this.setstudent} className='passivebutton'>
            {item.id} {item.name}
					</button>);
			}
      else{
          createlist = this.state.students.map((item, index) =>
            <button key={item.id} id={item.id} onClick={this.setstudent} className='passivebutton'>
              {item.id} {item.name}
            </button>);
          }
        }

        let addstudent = <Add_Student add={this.add} addcancel={this.addcancel}
          dataspec={Data_Speciality} />;

        let updatestudent = <Update_Student currstudent={this.state.currentstudent} update={this.update} updatecancel={this.updatecancel}
          dataspec={Data_Speciality} />;

        let deletestudent = <Delete_Student currstudent={this.state.currentstudent} delete={this.delete} deletecancel={this.deletecancel} />;

        let sortstudent = <Sort_Student sortsort = {this.sortsort} sortcancel = {this.sortcancel} dataspec={Data_Speciality}/>;

        return (<div className='students'>
          {menu}
          {this.state.flagadd && addstudent}
          {this.state.flagupdate && updatestudent}
          {this.state.flagdelete && deletestudent}
          {this.state.flagsort && sortstudent}
          <div className='student_list'> {createlist}</div>
        </div>
        );
      }
    }

    class Sort_Student extends React.Component{
    constructor(props){
        super(props);
		this.iname = null;
		this.ispec = null;
		this.iyear = null;
		this.igroup = null;
		this.state = {validate:true};
			
		}
		
	getVal = (val)=>{this.ispec = val;};
	
	obc = (e) =>{this.props.sortsort(this.iname, this.ispec, this.iyear, this.igroup);};
	
	nameChange = (e)=>{
		this.iname = e.currentTarget.value;
	};
	
	specChange = (e)=>{	
		this.ispec = e.currentTarget.value;
	};
	
	yearChange = (e)=>{
		this.iyear = e.currentTarget.value;					
	};
	
	groupChange = (e)=>{
		this.igroup = e.currentTarget.value;					
	};

	render(){
		let Year = new Date().getFullYear();
		return <table className="opstudent">
				<thead>
				<tr>
					<th colSpan="2"> Выбрать студентов у которых: </th>
				</tr>
				</thead>
				<tbody>
					<tr>
						<td>Имя</td>
						<td> 
							<input type="text" onChange={this.nameChange} placeholder='Фамилия И. О.' className='InputName' />
						</td>
					</tr>					
					<tr>
						<td>Специальность</td>
						<td>
							<input type="text" placeholder='Специальность' onChange={this.specChange}  />
						</td>
					</tr>					
					<tr>
						<td>Год поступления</td>
						<td> 
						
							<input type="number" placeholder='Год поступления' onChange={this.yearChange}/>
						</td>
					</tr>
					<tr>
						<td>Группа</td>
						<td> 
							<input type="number" placeholder='Группа' onChange={this.groupChange}  />
						</td>
					</tr>
					<tr>
						<th colSpan="2">
							<button onClick={this.obc} disabled={!this.state.validate}> Найти </button>
							<button onClick={this.props.sortcancel}> Отказаться </button> 
						</th>
					</tr>					
				</tbody>
			</table>;
	}
}

class Sort_Company extends React.Component{
    constructor(props){
        super(props);
		this.iname = null;
		this.state = {validate:true};						
		}

	
	obc = (e) =>{this.props.sortsort(this.iname);};
	
	nameChange = (e)=>{this.iname = e.currentTarget.value;
	};
	
	
	render(){
		let Year = new Date().getFullYear();
		return <table className="opstudent">
				<thead>
				<tr>
					<th colSpan="2"> Найти компанию по названию</th>
				</tr>
				</thead>
				<tbody>
					<tr>
						<td>Название компании</td>
						<td> 
							<input type="text" onChange={this.nameChange} placeholder='Название' className='InputName' />
						</td>
					</tr>					
					
					<tr>
						<th colSpan="2">
							<button onClick={this.obc} disabled={!this.state.validate}> Найти </button>
							<button onClick={this.props.sortcancel}> Отказаться </button> 
						</th>
					</tr>					
				</tbody>
			</table>;
	}
}

    class Add_Student extends React.Component {
      constructor(props) {
        super(props);
        this.iname = null;
        this.ispec = null;
        this.iyear = React.createRef();
        this.igroup = React.createRef();
        this.state = { validate: false };
      }

      getVal = (val) => { this.ispec = val; };
      obc = (e) => { this.props.add(this.iname, this.ispec, this.iyear.current.value, this.igroup.current.value); };

      nameChange = (e) => {
        this.iname = e.currentTarget.value;
        let v = this.iname && this.iname.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      render() {
        let Year = new Date().getFullYear();
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>New</th></tr>
          </thead>
          <tbody>
            <tr><td>Name</td><td><input type='text' onChange={this.nameChange} /></td></tr>
            <tr><td>Speciality</td><td><SpecList getVal={this.getVal} data={this.props.dataspec} defaultvalue={null} /></td></tr>
            <tr><td>Year</td>
              <td><input type='number' ref={this.iyear} defaultValue={Year} min={Year - 10} max={Year} /></td></tr>
            <tr><td>Group</td><td><input type='number' ref={this.igroup} defaultValue='1' min='1' max='10' /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Add</button>
              <button onClick={this.props.addcancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Update_Student extends React.Component {
      constructor(props) {
        super(props);
        this.iid = this.props.currstudent.id;
        this.iname = this.props.currstudent.name;
        this.ispec = this.props.currstudent.spec;
        this.iyear = React.createRef();
        this.igroup = React.createRef();
        this.state = { validate: true };
      }

      getVal = (val) => { this.ispec = val; };
      nameChange = (e) => {
        this.iname = e.currentTarget.value;
        let v = this.iname && this.iname.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      obc = (e) => {
        this.props.update(this.iid, this.iname, this.ispec, this.iyear.current.value, this.igroup.current.value);
      };

      render() {
        let Year = new Date().getFullYear();
        const { id, name, spec, syear, group } = this.props.currstudent;
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>Update ({id})</th></tr>
          </thead>
          <tbody>
            <tr><td>Name</td><td><input type='text' onChange={this.nameChange} value={this.iname} /></td></tr>
            <tr><td>Speciality</td><td><SpecList getVal={this.getVal} data={this.props.dataspec} defaultvalue={spec} /></td></tr>
            <tr><td>Year</td>
              <td><input type='number' ref={this.iyear} defaultValue={syear} min={Year - 10} max={Year} /></td></tr>
            <tr><td>Group</td><td><input type='number' ref={this.igroup} defaultValue={group} min='1' max='10' /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Update</button>
              <button onClick={this.props.updatecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Delete_Student extends React.Component {
      constructor(props) {
        super(props);
        this.iid = this.props.currstudent.id;
      }

      getVal = (val) => { this.ispec = val; };
      nameChange = (e) => {
        this.iname = e.currentTarget.value;
        let v = this.iname && this.iname.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      obc = (e) => {
        this.props.delete(this.iid);
      };

      render() {
        let Year = new Date().getFullYear();
        const { id, name, spec, syear, group } = this.props.currstudent;
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>Delete ({id})</th></tr>
          </thead>
          <tbody>
            <tr><td colSpan='2'>{name}, {spec}-{syear}-{group}</td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc}>Delete</button>
              <button onClick={this.props.deletecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Student_Events extends React.Component {
      constructor(props) {
        super(props);
      }

      state = { events: this.props.data, currentevent: null, eventid: null };

      addobc = (e) => { this.setState({ flagadd: true }) };
      addcancel = (e) => { this.setState({ flagadd: false }) };
      add = (text, company, date, student) => {
        let newid = Date.now() % (10);
        let newevent = { id: newid, text: text, company: company, date: date, student: student };
        this.state.events.unshift(newevent);
        this.setState({ flagadd: false });
      };
     
      updateobc = (e) => { this.setState({ flagupdate: true });
                            this.setState({ eventid: e.target.id}); };
      updatecancel = (e) => { this.setState({ flagupdate: false }) };
      update = (id, text, company, date, student) => {
        let ntx = this.state.events.findIndex((em) => em.id == id);
        if (ntx >= 0) {
          this.state.events[ntx] =
            { id: id, text: text, company: company, date: date, student: student };
        };
        this.setState({ flagupdate: false });
      };

      deleteobc = (e) => { this.setState({ flagdelete: true });
                          this.setState({ eventid: e.target.id}); };
      deletecancel = (e) => { this.setState({ flagdelete: false }) };
      delete = (id) => {
        let ntx = this.state.events.findIndex((em) => em.id == id);
        this.state.events.splice(ntx, 1);
        this.setState({ flagdelete: false });
      };

      render() {
        let h3 = null;
        let createevents = null;
        let addevent = null;

        if (this.props.currentstudent != null) {
          const { name, spec, syear, group } = this.props.currentstudent;
          h3 = <h3>{name}, {spec} - {syear} - {group}<hr /></h3>;

          addevent = <Add_Student_Event add={this.add} addcancel={this.addcancel} currentstudent={this.props.currentstudent} datacompany={Data_Companies} />;

          createevents =
            this.props.data.map((item, index) => {
              if (item.student.id == this.props.currentstudent.id) {
                return  <div className='event' key={item.id}>
                        <button id={item.id} title='Update event' onClick={this.updateobc}><i className = "fas fa-sync-alt fa-spin"/></button>
                        <button id={item.id} title='Delete event' onClick={this.deleteobc}><i className = "fas fa-sync-alt fa-spin"/></button>
                        <p key={item.id}>{item.id}: {item.date} {item.company != null ? ', ' + item.company.name : null}, {item.text}</p>
                        {this.state.flagupdate && (this.state.eventid==item.id) && <Update_Student_Event currevent={item} update={this.update} updatecancel={this.updatecancel} datacompany={Data_Companies} />}
                        {this.state.flagdelete && (this.state.eventid==item.id) && <Delete_Student_Event currevent={item} delete={this.delete} deletecancel={this.deletecancel} />}
                        </div>
              }
            });
        };

        return (<div className='student_events'>
          {h3}
          {(this.props.currentstudent != null) && <button title='Add event' onClick={this.addobc}><i className = "fas fa-sync-alt fa-spin"/></button>}
          {this.state.flagadd && addevent}
          {createevents}
        </div>
        );
      }

    }

    class Add_Student_Event extends React.Component {
      constructor(props) {
        super(props);
         this.itext = null;
        this.icompany = React.createRef();
        this.idate = null;
        this.istudent = this.props.currentstudent;
        this.state = { validate: false };
      }

      getVal = (val) => { this.icompany = Data_Companies.find((item) => item.id == val); };
      textChange = (e) => {
        this.itext = e.currentTarget.value;
        let v = this.itext && this.itext.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      dateChange = (e) => {
        this.idate = e.target.value;
      };

      obc = (e) => {
        this.props.add(this.itext,  this.icompany, this.idate, this.istudent);
      };

      render() {
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>New Event for {this.istudent.name}</th></tr>
          </thead>
          <tbody>         
            <tr><td>Event</td><td><input type='text' onChange={this.textChange} /></td></tr>
            <tr><td>Date</td>
              <td><input type="date" onChange={this.dateChange}  /></td></tr>
            <tr><td>Company</td><td><CompanyList getVal={this.getVal} data={this.props.datacompany} defaultvalue={null} /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Add</button>
              <button onClick={this.props.addcancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Update_Student_Event extends React.Component {

      constructor(props) {
        super(props);
        this.iid = this.props.currevent.id;
        this.itext = this.props.currevent.text;
        this.icompany = this.props.currevent.company;
        this.idate = this.props.currevent.date;
        this.istudent = this.props.currevent.student;
        this.state = { validate: true };
      }

      getVal = (val) => { this.icompany = Data_Companies.find((item) => item.id == val); };
      textChange = (e) => {
        this.itext = e.currentTarget.value;
        let v = this.itext && this.itext.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      dateChange = (e) => {
        this.idate = e.target.value;
      };

      obc = (e) => {
        this.props.update(this.iid, this.itext,  this.icompany, this.idate, this.istudent);
      };

      render() {
        const { id, text, company, date, student } = this.props.currevent;
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>Update Event for ({student.name})</th></tr>
          </thead>
          <tbody>
            <tr><td>Event</td><td><input type='text' onChange={this.textChange} value={this.itext} /></td></tr>
            <tr><td>Date</td>
              <td><input type="date" onChange={this.dateChange} value={this.idate} /></td></tr>
            <tr><td>Company</td><td><CompanyList getVal={this.getVal} data={this.props.datacompany} defaultvalue={company.name} /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Update</button>
              <button onClick={this.props.updatecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Delete_Student_Event extends React.Component {
      constructor(props) {
        super(props);
        this.iid = this.props.currevent.id;
      }

      obc = (e) => {
        this.props.delete(this.iid);
      };

      render() {
        const { id } = this.props.currevent;
        return <table className='opcompany'>
          <thead>
            <tr><th colSpan='2'>Delete event for {this.props.currevent.student.name}</th></tr>
          </thead>
          <tbody>
            <tr><td colSpan='2'>{this.props.currevent.date} - {this.props.currevent.company.name} - {this.props.currevent.text}</td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc}>Delete</button>
              <button onClick={this.props.deletecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Companies extends React.Component {

      state = { companies: this.props.data, sortComp : this.props.sortdata, flagsort : false, flagSortArray : false };
      flagx = () => { return this.state.flagadd || this.state.flagupdate || this.state.flagdelete; };

      setcompany = (e) => {
        if (!this.flagx()) {
          this.props.currentcompany(this.state.companies.find(em => em.id == e.target.id));
          this.state.currentcompany = this.state.companies.find(em => em.id == e.target.id);
        }
      };

      addobc = (e) => { this.setState({ flagadd: true }) };
      addcancel = (e) => { this.setState({ flagadd: false }) };
      add = (name) => {
        this.setState({ flagadd: false });
        let newid = Date.now() % (10 * 365 * 24 * 60 * 60 * 1000);
        let newcompany = { id: newid, name: name };
        this.state.companies.unshift(newcompany);
        this.props.currentcompany(newcompany);
      };

      updateobc = (e) => { this.setState({ flagupdate: true }) };
      updatecancel = (e) => { this.setState({ flagupdate: false }) };
      update = (id, name) => {
        let ntx = this.state.companies.findIndex((em) => em.id == id);
        if (ntx >= 0) {
          this.state.companies[ntx] =
            { id: id, name: name };
          this.props.currentcompany(this.state.companies[ntx] =
            { id: id, name: name });
        };
        this.setState({ flagupdate: false });
      };

      deleteobc = (e) => { this.setState({ flagdelete: true }) };
      deletecancel = (e) => { this.setState({ flagdelete: false }) };
      delete = (id) => {
        let ntx = this.state.companies.findIndex((em) => em.id == id);
        this.state.companies.splice(ntx, 1);
        this.setState({ flagdelete: false });
      };

      sortobc = (e)=>{this.setState({flagsort:true})};
	sortcancel = (e)=>{this.setState({flagsort:false})};
	
	sortsort = (name)=>{
				this.setState({flagsort:false});				
				this.state.sortComp.splice(0);
				
				this.state.companies.map((item, index)=>{
					if(item.name==name&&(name!=null)){
						this.state.sortComp.unshift(item);
					}
					if(name!=null){
							this.setState({flagSortArray:true});								
					}												
			});
		};

      render() {
        let createlist = null;
        let flag = this.state.currentcompany != null;
        let menu = <div className='optmenu'>
          {!this.flagx() && <button id='add' title='Add company'><img src='images/add.png' alt='add' onClick={this.addobc} /></button>}

          {!this.flagx() && flag && <button id='delete' title='Delete company'><img src='images/remove.png' alt='delete' onClick={this.deleteobc} /></button>}

          {!this.flagx() && flag && <button id='update' title='Update company'><img src='images/update.png' alt='update' onClick={this.updateobc} /></button>}

          {!this.flagx() && <button id="find" alt='find'><img src="images/icons8_find.png" onClick={this.sortobc}/></button>}
        </div>

        if (Array.isArray(this.state.companies)) {
          if( this.state.flagSortArray){
            createlist = this.state.sortComp.map((item, index) =>
            <button key={item.id} id={item.id} onClick={this.setcompany} className='passivebutton'>
              {item.id} {item.name}
					</button>);
			}
      else{
          createlist = this.state.companies.map((item, index) =>
            <button key={item.id} id={item.id} onClick={this.setcompany} className='passivebutton'>
              {item.id} {item.name}
            </button>);
          }
        }

        let addcompany = <Add_Company add={this.add} addcancel={this.addcancel} />;

        let updatecompany = <Update_Company currcompany={this.state.currentcompany} update={this.update} updatecancel={this.updatecancel} />;

        let deletecompany = <Delete_Company currcompany={this.state.currentcompany} delete={this.delete} deletecancel={this.deletecancel} />;

        let sortcompany = <Sort_Company sortsort = {this.sortsort} sortcancel = {this.sortcancel} />;

        return (<div className='companies'>
          {menu}
          {this.state.flagadd && addcompany}
          {this.state.flagupdate && updatecompany}
          {this.state.flagdelete && deletecompany}
          {this.state.flagsort && sortcompany}
          <div className='company_list'> {createlist}</div>
        </div>
        );
      }
    }

    class Add_Company extends React.Component {
      constructor(props) {
        super(props);
        this.iname = null;
        this.state = { validate: false };
      }

      obc = (e) => { this.props.add(this.iname); };

      nameChange = (e) => {
        this.iname = e.currentTarget.value;
        let v = this.iname && this.iname.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      render() {
        return <table className='opcompany'>
          <thead>
            <tr><th colSpan='2'>New</th></tr>
          </thead>
          <tbody>
            <tr><td>Name</td><td><input type='text' onChange={this.nameChange} /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Add</button>
              <button onClick={this.props.addcancel}>Back</button>
            </th></tr>
          </tbody>
        </table>
      }
    }

    class Update_Company extends React.Component {
      constructor(props) {
        super(props);
        this.iid = this.props.currcompany.id;
        this.iname = this.props.currcompany.name;
        this.state = { validate: true };
      }

      nameChange = (e) => {
        this.iname = e.currentTarget.value;
        let v = this.iname && this.iname.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      obc = (e) => {
        this.props.update(this.iid, this.iname);
      };

      render() {
        const { id, name } = this.props.currcompany;
        return <table className='opcompany'>
          <thead>
            <tr><th colSpan='2'>Update ({id})</th></tr>
          </thead>
          <tbody>
            <tr><td>Name</td><td><input type='text' onChange={this.nameChange} value={this.iname} /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Update</button>
              <button onClick={this.props.updatecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Delete_Company extends React.Component {

      constructor(props) {
        super(props);
        this.iid = this.props.currcompany.id;
      }

      nameChange = (e) => {
        this.iname = e.currentTarget.value;
        let v = this.iname && this.iname.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      obc = (e) => {
        this.props.delete(this.iid);
      };

      render() {
        const { id, name } = this.props.currcompany;
        return <table className='opcompany'>
          <thead>
            <tr><th colSpan='2'>Delete ({id})</th></tr>
          </thead>
          <tbody>
            <tr><td colSpan='2'>{name}</td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc}>Delete</button>
              <button onClick={this.props.deletecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Company_Events extends React.Component {
      constructor(props) {
        super(props);
      }

      state = { events: this.props.data, currentevent: null, eventid: null };

      addobc = (e) => { this.setState({ flagadd: true }) };
      addcancel = (e) => { this.setState({ flagadd: false }) };
      add = (text, company, date, student) => {
        let newid = Date.now() % (10);
        let newevent = { id: newid, text: text, company: company, date: date, student: student };
        this.state.events.unshift(newevent);
        this.setState({ flagadd: false });
      };
     
      updateobc = (e) => { this.setState({ flagupdate: true });
                            this.setState({ eventid: e.target.id}); };
      updatecancel = (e) => { this.setState({ flagupdate: false }) };
      update = (id, text, company, date, student) => {
        let ntx = this.state.events.findIndex((em) => em.id == id);
        if (ntx >= 0) {
          this.state.events[ntx] =
            { id: id, text: text, company: company, date: date, student: student };
        };
        this.setState({ flagupdate: false });
      };

      deleteobc = (e) => { this.setState({ flagdelete: true });
                          this.setState({ eventid: e.target.id}); };
      deletecancel = (e) => { this.setState({ flagdelete: false }) };
      delete = (id) => {
        let ntx = this.state.events.findIndex((em) => em.id == id);
        this.state.events.splice(ntx, 1);
        this.setState({ flagdelete: false });
      };


      render() {
        let h3 = null;
        let createevents = null;
        let addevent = null;

        if (this.props.currentcompany != null) {
          const { name } = this.props.currentcompany;
          h3 = <h3>{name}<hr /></h3>;

          addevent = <Add_Company_Event add={this.add} addcancel={this.addcancel} currentcompany={this.props.currentcompany}  datastudents={Data_Students}  />;

          createevents =
            this.props.data.map((item, index) => {
              if (item.company != null) {
                if (item.company.id == this.props.currentcompany.id) {
                  return <div className='event' key={item.id}>
                        <button id={item.id} title='Update event' onClick={this.updateobc}><i className = "fas fa-sync-alt fa-spin"/></button>
                        <button id={item.id} title='Delete event' onClick={this.deleteobc}><i className = "fas fa-sync-alt fa-spin"/></button>
                        <p key={item.id}>{item.id}: {item.date} , {item.student.name}, {item.text}</p>
                        {this.state.flagupdate && (this.state.eventid==item.id) && <Update_Company_Event currevent={item} update={this.update} updatecancel={this.updatecancel} datastudents={Data_Students} />}
                        {this.state.flagdelete && (this.state.eventid==item.id) && <Delete_Company_Event currevent={item} delete={this.delete} deletecancel={this.deletecancel} />}
                        </div>
                }
              }
            });
        };

        return (<div className='company_events'>
          {h3}
          {(this.props.currentcompany != null) && <button title='Add event' onClick={this.addobc}><i className = "fas fa-sync-alt fa-spin"/></button>}
          {this.state.flagadd && addevent}
          {createevents}
        </div>
        );
      }
    }

    class Add_Company_Event extends React.Component {
      constructor(props) {
        super(props);
         this.itext = null;
        this.icompany = this.props.currentcompany;
        this.idate = null;
        this.istudent = React.createRef();
        this.state = { validate: false };
      }

      getVal = (val) => { this.istudent = Data_Students.find((item) => item.id == val); };
      textChange = (e) => {
        this.itext = e.currentTarget.value;
        let v = this.itext && this.itext.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      dateChange = (e) => {
        this.idate = e.target.value;
      };

      obc = (e) => {
        this.props.add(this.itext,  this.icompany, this.idate, this.istudent);
      };

      render() {
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>New Event for {this.icompany.name}</th></tr>
          </thead>
          <tbody>         
            <tr><td>Event</td><td><input type='text' onChange={this.textChange} /></td></tr>
            <tr><td>Date</td>
              <td><input type="date" onChange={this.dateChange}  /></td></tr>
            <tr><td>Student</td><td><StudentList getVal={this.getVal} data={this.props.datastudents} defaultvalue={null} /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Add</button>
              <button onClick={this.props.addcancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Update_Company_Event extends React.Component {

      constructor(props) {
        super(props);
        this.iid = this.props.currevent.id;
        this.itext = this.props.currevent.text;
        this.icompany = this.props.currevent.company;
        this.idate = this.props.currevent.date;
        this.istudent = this.props.currevent.student;
        this.state = { validate: true };
      }

      getVal = (val) => { this.istudent = Data_Students.find((item) => item.id == val);  };
      textChange = (e) => {
        this.itext = e.currentTarget.value;
        let v = this.itext && this.itext.trim();
        if (this.state.validate != v) { this.setState({ validate: v }); }
      };

      dateChange = (e) => {
        this.idate = e.target.value;
      };

      obc = (e) => {
        this.props.update(this.iid, this.itext, this.icompany, this.idate, this.istudent);
      };

      render() {
        const { id, text, company, date, student } = this.props.currevent;
        return <table className='opstudent'>
          <thead>
            <tr><th colSpan='2'>Update Event for {this.icompany.name}</th></tr>
          </thead>
          <tbody>
            <tr><td>Event</td><td><input type='text' onChange={this.textChange} value={this.itext} /></td></tr>
            <tr><td>Date</td>
              <td><input type="date" onChange={this.dateChange} value={this.idate} /></td></tr>
            <tr><td>Student</td><td><StudentList getVal={this.getVal} data={this.props.datastudents} defaultvalue={student.name} /></td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc} disabled={!this.state.validate}>Update</button>
              <button onClick={this.props.updatecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }

    class Delete_Company_Event extends React.Component {
      constructor(props) {
        super(props);
        this.iid = this.props.currevent.id;
      }

      obc = (e) => {
        this.props.delete(this.iid);
      };

      render() {
        const { id } = this.props.currevent;
        return <table className='opcompany'>
          <thead>
            <tr><th colSpan='2'>Delete event for {this.props.currevent.company.name}</th></tr>
          </thead>
          <tbody>
            <tr><td colSpan='2'>{this.props.currevent.date} - {this.props.currevent.student.name} - {this.props.currevent.text}</td></tr>
            <tr><th colSpan='2'>
              <button onClick={this.obc}>Delete</button>
              <button onClick={this.props.deletecancel}>Back</button>
            </th></tr>

          </tbody>
        </table>
      }
    }
      
//     class Events extends React.Component {

// state = { events: this.props.data };
// flagx = () => { return this.state.flagadd || this.state.flagupdate || this.state.flagdelete; };

// setevent = (e) => {
//   if (!this.flagx()) {
//     this.props.currentevent(this.state.events.find(em => em.id == e.target.id));
//     this.state.currentevent = this.state.events.find(em => em.id == e.target.id);
//   }
// };

// addobc = (e) => { this.setState({ flagadd: true }) };
// addcancel = (e) => { this.setState({ flagadd: false }) };
// add = (text) => {
//   this.setState({ flagadd: false });
//   let newid = Date.now() % (10);
//   let newevent = { id: newid, text: text };
//   this.state.events.unshift(newevent);
//   this.props.currentevent(newevent);
// };

// updateobc = (e) => { this.setState({ flagupdate: true }) };
// updatecancel = (e) => { this.setState({ flagupdate: false }) };
// update = (id, text) => {
//   let ntx = this.state.events.findIndex((em) => em.id == id);
//   if (ntx >= 0) {
//     this.state.events[ntx] =
//       { id: id, text: text };
//     this.props.currentevent(this.state.events[ntx] =
//       { id: id, text: text });
//   };
//   this.setState({ flagupdate: false });
// };

// deleteobc = (e) => { this.setState({ flagdelete: true }) };
// deletecancel = (e) => { this.setState({ flagdelete: false }) };
// delete = (id) => {
//   let ntx = this.state.events.findIndex((em) => em.id == id);
//   this.state.events.splice(ntx, 1);
//   this.setState({ flagdelete: false });
// };

// render() {
//   let createlist = null;
//   let flag = this.state.currentevent != null;
//   let menu = <div className='optmenu'>
//     {!this.flagx() && <button id='add' title='Add event'><img src='images/add.png' alt='add' onClick={this.addobc} /></button>}

//     {!this.flagx() && flag && <button id='delete' title='Delete event'><img src='images/remove.png' alt='delete' onClick={this.deleteobc} /></button>}

//     {!this.flagx() && flag && <button id='update' title='Update event'><img src='images/update.png' alt='update' onClick={this.updateobc} /></button>}
//   </div>

//   if (Array.isArray(this.state.events)) {

//     createlist = this.state.events.map((item, index) =>
//       <button key={item.id} id={item.id} onClick={this.setevent} className='passivebutton'>
//         {item.text}
//       </button>);
//   }

//   let addevent = <Add_Event add={this.add} addcancel={this.addcancel} />;

//   let updateevent = <Update_Event currevent={this.state.currentevent} update={this.update} updatecancel={this.updatecancel} />;

//   let deleteevent = <Delete_Event currevent={this.state.currentevent} delete={this.delete} deletecancel={this.deletecancel} />;

//   return (<div className='events'>
//     {menu}
//     {this.state.flagadd && addevent}
//     {this.state.flagupdate && updateevent}
//     {this.state.flagdelete && deleteevent}
//     <div className='company_list'> {createlist}</div>
//   </div>
//   );
// }
// }

// class Add_Event extends React.Component {
// constructor(props) {
//   super(props);
//   this.itext = null;
//   this.state = { validate: false };
// }

// obc = (e) => { this.props.add(this.itext); };

// textChange = (e) => {
//   this.itext = e.currentTarget.value;
//   let v = this.itext && this.itext.trim();
//   if (this.state.validate != v) { this.setState({ validate: v }); }
// };

// render() {
//   return <table className='opcompany'>
//     <thead>
//       <tr><th colSpan='2'>New</th></tr>
//     </thead>
//     <tbody>
//       <tr><td>Event</td><td><input type='text' onChange={this.textChange} /></td></tr>
//       <tr><th colSpan='2'>
//         <button onClick={this.obc} disabled={!this.state.validate}>Add</button>
//         <button onClick={this.props.addcancel}>Back</button>
//       </th></tr>
//     </tbody>
//   </table>
// }
// }

// class Update_Event extends React.Component {
// constructor(props) {
//   super(props);
//   this.iid = this.props.currevent.id;
//   this.itext = this.props.currevent.text;
//   this.state = { validate: true };
// }

// textChange = (e) => {
//   this.itext = e.currentTarget.value;
//   let v = this.itext && this.itext.trim();
//   if (this.state.validate != v) { this.setState({ validate: v }); }
// };

// obc = (e) => {
//   this.props.update(this.iid, this.itext);
// };

// render() {
//   const { id, text } = this.props.currevent;
//   return <table className='opcompany'>
//     <thead>
//       <tr><th colSpan='2'>Update ({id})</th></tr>
//     </thead>
//     <tbody>
//       <tr><td>Event</td><td><input type='text' onChange={this.textChange} value={this.itext} /></td></tr>
//       <tr><th colSpan='2'>
//         <button onClick={this.obc} disabled={!this.state.validate}>Update</button>
//         <button onClick={this.props.updatecancel}>Back</button>
//       </th></tr>

//     </tbody>
//   </table>
// }
// }

// class Delete_Event extends React.Component {

// constructor(props) {
//   super(props);
//   this.iid = this.props.currevent.id;
// }

// obc = (e) => {
//   this.props.delete(this.iid);
// };

// render() {
//   const { id, text } = this.props.currevent;
//   return <table className='opcompany'>
//     <thead>
//       <tr><th colSpan='2'>Delete ({id})</th></tr>
//     </thead>
//     <tbody>
//       <tr><td colSpan='2'>Event: {text}</td></tr>
//       <tr><th colSpan='2'>
//         <button onClick={this.obc}>Delete</button>
//         <button onClick={this.props.deletecancel}>Back</button>
//       </th></tr>

//     </tbody>
//   </table>
// }
// }

// class Evs extends React.Component {
// constructor(props) {
//   super(props);
// }

// state = { events: this.props.data, currentevent: null, eventid: null };

// addobc = (e) => { this.setState({ flagadd: true }) };
// addcancel = (e) => { this.setState({ flagadd: false }) };
// add = (text, company, date, student) => {
//   let newid = Date.now() % (1229);
//   let newevent = { id: newid, text: text, company: company, date: date, student: student };
//   this.state.events.unshift(newevent);
//   this.setState({ flagadd: false });
// };

// updateobc = (e) => { this.setState({ flagupdate: true });
//                       this.setState({ eventid: e.target.id}); };
// updatecancel = (e) => { this.setState({ flagupdate: false }) };
// update = (id, text, company, date, student) => {
//   let ntx = this.state.events.findIndex((em) => em.id == id);
//   if (ntx >= 0) {
//     this.state.events[ntx] =
//       { id: id, text: text, company: company, date: date, student: student };
//   };
//   this.setState({ flagupdate: false });
// };

// deleteobc = (e) => { this.setState({ flagdelete: true });
//                     this.setState({ eventid: e.target.id}); };
// deletecancel = (e) => { this.setState({ flagdelete: false }) };
// delete = (id) => {
//   let ntx = this.state.events.findIndex((em) => em.id == id);
//   this.state.events.splice(ntx, 1);
//   this.setState({ flagdelete: false });
// };

// render() {
//   let h3 = null;
//   let createevents = null;
//   let addevent = null;

//   if (this.props.currentevent != null) {
//     const { name } = this.props.currentevent;
//     h3 = <h3>{name}<hr /></h3>;

//     addevent = <Add_Ev add={this.add} addcancel={this.addcancel} currentevent={this.props.currentevent} datacompany={Data_Companies}  datastudents={Data_Students}  />;

//     createevents =
//       this.props.data.map((item, index) => {
//         if (item != null) {
//           if (item.id == this.props.currentevent.id) {
//             return <div className='event' key={item.id}>
//                   <button id={item.id} title='Update event' onClick={this.updateobc}><i className = "fas fa-sync-alt fa-spin"/></button>
//                   <button id={item.id} title='Delete event' onClick={this.deleteobc}><i className = "fas fa-sync-alt fa-spin"/></button>
//                   <p key={item.id}>{item.id}: {item.date} , {item.student.name}, {item.text}</p>
//                   {this.state.flagupdate && (this.state.eventid==item.id) && <Update_Ev currevent={item} update={this.update} updatecancel={this.updatecancel} datastudents={Data_Students} datacompany={Data_Companies}/>}
//                   {this.state.flagdelete && (this.state.eventid==item.id) && <Delete_Ev currevent={item} delete={this.delete} deletecancel={this.deletecancel} />}
//                   </div>
//           }
//         }
//       });
//   };

//   return (<div className='company_events'>
//     {h3}
//     {(this.props.currentevent != null) && <button title='Add event' onClick={this.addobc}><i className = "fas fa-sync-alt fa-spin"/></button>}
//     {this.state.flagadd && addevent}
//     {createevents}
//   </div>
//   );
// }
// }

// class Add_Ev extends React.Component {
// constructor(props) {
//   super(props);
//    this.itext =  this.props.currentevent.text;
//   this.icompany = null;
//   this.idate = null;
//   this.istudent = React.createRef();
//   this.state = { validate: false };
// }

// getValStudent = (val) => { this.istudent = Data_Students.find((item) => item.id == val); };
// getValCompany = (val) => { this.icompany = Data_Companies.find((item) => item.id == val); };

// dateChange = (e) => {
//   this.idate = e.target.value;
//   this.setState({ validate: true });
// };

// obc = (e) => {
//   this.props.add(this.itext, this.icompany, this.idate, this.istudent);
// };

// render() {
//   return <table className='opstudent'>
//     <thead>
//       <tr><th colSpan='2'>{this.itext}</th></tr>
//     </thead>
//     <tbody>         
//       <tr><td>Date</td>
//         <td><input type="date" onChange={this.dateChange}  /></td></tr>
//       <tr><td>Student</td><td><StudentList getVal={this.getValStudent} data={this.props.datastudents} defaultvalue={null} /></td></tr>
//       <tr><td>Company</td><td><CompanyList getVal={this.getValCompany} data={this.props.datacompany} defaultvalue={null} /></td></tr>
//       <tr><th colSpan='2'>
//         <button onClick={this.obc} disabled={!this.state.validate}>Add</button>
//         <button onClick={this.props.addcancel}>Back</button>
//       </th></tr>

//     </tbody>
//   </table>
// }
// }

// class Update_Ev extends React.Component {

// constructor(props) {
//   super(props);
//   this.iid = this.props.currevent.id;
//   this.itext = this.props.currevent.text;
//   this.icompany = this.props.currevent.company;
//   this.idate = this.props.currevent.date;
//   this.istudent = this.props.currevent.student;
//   this.state = { validate: true };
// }

// getValStudent = (val) => { this.istudent = Data_Students.find((item) => item.id == val); };
// getValCompany = (val) => { this.icompany = Data_Companies.find((item) => item.id == val); };

// dateChange = (e) => {
//   this.idate = e.target.value;
// };

// obc = (e) => {
//   this.props.update(this.iid, this.itext, this.icompany, this.idate, this.istudent);
// };

// render() {
//   const { id, text, company, date, student } = this.props.currevent;
//   return <table className='opstudent'>
//     <thead>
//       <tr><th colSpan='2'>{this.itext}</th></tr>
//     </thead>
//     <tbody>
//       <tr><td>Date</td>
//         <td><input type="date" onChange={this.dateChange} value={this.idate} /></td></tr>
//       <tr><td>Student</td><td><StudentList getVal={this.getValStudent} data={this.props.datastudents} defaultvalue={student.name} /></td></tr>
//       <tr><td>Company</td><td><CompanyList getVal={this.getValCompany} data={this.props.datacompany} defaultvalue={null} /></td></tr>
//       <tr><th colSpan='2'>
//         <button onClick={this.obc} disabled={!this.state.validate}>Update</button>
//         <button onClick={this.props.updatecancel}>Back</button>
//       </th></tr>

//     </tbody>
//   </table>
// }
// }

// class Delete_Ev extends React.Component {
// constructor(props) {
//   super(props);
//   this.iid = this.props.currevent.id;
// }

// obc = (e) => {
//   this.props.delete(this.iid);
// };

// render() {
//   const { id } = this.props.currevent;
//   return <table className='opcompany'>
//     <thead>
//       <tr><th colSpan='2'>Delete {this.itext} - {this.iid}</th></tr>
//     </thead>
//     <tbody>
//       <tr><td colSpan='2'>{this.props.currevent.date} - {this.props.currevent.student.name} - {this.props.currevent.text}</td></tr>
//       <tr><th colSpan='2'>
//         <button onClick={this.obc}>Delete</button>
//         <button onClick={this.props.deletecancel}>Back</button>
//       </th></tr>

//     </tbody>
//   </table>
// }
// }

    const SpecList = (props) => {
      let onSpecChange = (e) => { props.getVal(e.currentTarget.value); };
      let tmp = props.data.map((item, index) => {
        return <option key={item.name} value={item.name}>{item.name}</option>
      });
      return <select onChange={onSpecChange} defaultValue={props.defaultvalue}>{tmp}</select>;
    };

    const CompanyList = (props) => {
      let onCompanyChange = (e) => { props.getVal(e.currentTarget.value); };
      let tmp = props.data.map((item, index) => {
        return <option key={item.id} value={item.id}>{item.name}</option>
      });
      return <select onChange={onCompanyChange} defaultValue={props.defaultvalue}>{tmp}</select>;
    };

    const StudentList = (props) => {
      let onCompanyChange = (e) => { props.getVal(e.currentTarget.value); };
      let tmp = props.data.map((item, index) => {
        return <option key={item.id} value={item.id}>{item.name}</option>
      });
      return <select onChange={onCompanyChange} defaultValue={props.defaultvalue}>{tmp}</select>;
    };

    ReactDOM.render(
      <div>
        <App />
      </div>,
      document.getElementById('root')
    );
  </script>
</body>

</html>